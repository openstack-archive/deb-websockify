From f30ad05c70ab2a43c9078e2f79da40f1dc0c60ec Mon Sep 17 00:00:00 2001
From: Joel Martin <github@martintribe.org>
Date: Fri, 27 Sep 2013 07:42:57 -0500
Subject: [PATCH] Fix #97: rebind.so not found when installed

This should fix the upstream Debian bug:
http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=719889
---
 websockify/websocketproxy.py | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/websockify/websocketproxy.py b/websockify/websocketproxy.py
index 1154d92..f893d1f 100755
--- a/websockify/websocketproxy.py
+++ b/websockify/websocketproxy.py
@@ -55,7 +55,10 @@ def __init__(self, *args, **kwargs):
         self.wrap_times    = [0, 0, 0]
 
         if self.wrap_cmd:
-            rebinder_path = ['./', os.path.dirname(sys.argv[0])]
+            wsdir = os.path.dirname(sys.argv[0])
+            rebinder_path = [os.path.join(wsdir, "..", "lib"),
+                             os.path.join(wsdir, "..", "lib", "websockify"),
+                             wsdir]
             self.rebinder = None
 
             for rdir in rebinder_path:
-- 
1.8.4

